\chapter{Úvod}
Cílem práce je ?nejen!? navrhnout nástroj, který podporuje provádění finanční analýzy podniku. Finanční analýza je v~podnikové sféře soubor činností umožňující zjistit a~vyhodnotit finanční situaci podniku na základě dat o~jeho hospodaření. Její provádění a~zkoumání výsledků je jedním z~předpokladů pro kvalitní a~komplexní vedení podniku. Cílovou skupinu produktu tedy tvoří finanční analytici, manažeři společností i běžní podnikatelé, jimž má usnadnit provádění této činnosti.

Práce obsahuje dva tematické celky. Nejprve bude provedeno shrnutí teorie spojené s~prováděním finanční analýzy -- co je to finanční analýza, jaké jsou její cíle, jaká jsou vstupní data a~co je výstupem, vysvětlení pojmů, používaných metod a~strategií, konstrukcí a~vypočtů jednotlivých ukazatelů finanční analýzy a~intepretací jejich hodnot. 
Druhým tematickým celkem je popis nástroje, který finanční analýzu provádí a~který bude v~rámci této diplomové práce implementován. 

Text práce je členěn do pěti kapitol. Jelikož je finanční analýza poměrně rozsáhlá oblast, celá příští kapitola je věnována prvnímu celku, teorii. 

Ve třetí kapitole jsou ještě před vytvářením vlastní koncepce podrobeny testování již existující nástroje, abychom si mohli udělat obrázek o~tom, jak tuto problematiku řešili jiní. Na základě zjištěných poznatků je vypracován návrh programového řešení vlastního nástroje.

Čtvrtá kapitola se zabývá realizací návrhu, implementačními detaily a fungováním nástroje. 

V~závěrečné kapitole jsou shrnuty a~zhodnoceny dosažené výsledky, přínosy této práce a~návrhy na její možná rozšíření.

Pro lepší demonstraci budou v~této práci analyzovány výsledky hospodaření společnosti Krajči, která se zabývá def. Výkaz zisku a~ztráty a~rozvahu lze najít v~příloze.





























\chapter{Finanční analýza}


\section{Předmět, motivace a~cíle}
Finanční analýza podniku je metoda hodnocení finančního hospodaření podniku, při které se získaná data třídí, agregují, poměřují mezi sebou navzájem, kvantifikují se vztahy mezi nimi, hledají se mezi nimi kauzální souvisloti a~určuje se jejich vývoj. Tím se zvyšuje vypovídací schopnost zpracovávaných dat, zvyšuje se jejich informační hodnota.\cite{sedl}

Motivací je posouzení finanční situace podniku a~její příčiny, do jisté míry i k~predikci stavu podniku v~budoucnu, odhalení důsledků vlastních rozhodnutí, identifikaci slabých míst, plánování, zhodnocení hospodaření, vyvozování závěrů o~vlastnostech podniku, ohodnocení podniku a~vyvozování dalších užitečných informací.

Mimo to se v~praxi lze setkat s~případy, kdy je pro dosažení podnikatelského záměru provedení finanční analýzy nezbytné. Její výsledky jsou směrodatné například při rozhodování banky mezi poskytnutím a~neposkytnutím úvěru, pro vyměření výše úroků.

Při finanční analýze se používají dva navzájem propojené přístupy\cite{kova}:
\begin{enumerate}
	\item kvalitativní (fundamentální) analýza, založená na znalostech souvislostí mezi ekonomickými i mimoekonomickými jevy, zkušenostech odborníků a~na jejich subjektivních odhadech
	\item kvantitativní (technická) analýza, která využívá matematické, statistické a~jiné algoritmizovatelné postupy
\end{enumerate}

V~této práci se budeme zabývat především kvantitativní analýzou, právě z~důvodu možnosti její algoritmizace a tím pádem možnosti strojového provádění. Výstup této analýzy poté poslouží jako užitečný podklad pro analýzu kvalitativní, kterou provede samotný uživatel.


\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/ccf.png}
  \caption{Schéma finančních toků podniku \cite{sedl}}
  \label{ccf}
\end{figure}

\section{Vstupní data}
Abychom mohli provést finanční analýzu podniku nebo investice, musíme mít data, ze kterých budeme vycházet. Množina vstupních dat není nijak omezena a~může být vskutku rozsáhlá -- při výpočtu a~odvozování závěrů lze zohlednit nejrůznější faktory, ekonomické i mimoekenomické. Pro nás budou však klíčová především data o~vlastním hospodaření podniku, za jejichž evidenci je zodpovědná účetní jednotka podniku, která je v~průběhu roku zapisuje do takzvané účtové osnovy. 

Při analýze investice se vychází z~především  z~atributů investice, jako je například doba investice, úroková sazba a výnosy a výdaje s~ní spojené.

\subsubsection{Účtová osnova}
Právnické osoby, fyzické osoby zapsané v~obchodním rejistříku a~některé další subjekty jsou ze zákona o~účetnictví povinny vést podvojné účetnictví, což implikuje povinnost účtovat podle účtové osnovy. Všechny peněžní toky a~prostředky musí být evidovány na příslušném účtu. Přestože je účtů nespočet, obecně se dají rozdělit do dvou skupin -- rozvahové a~výsledovkové. Tyto subjekty jsou dále povinny každoročně vypracovat a~zveřejnit účetní závěrku, která je tvořena dvěmi finančními výkazy, rozvaha a~výkaz zisku a~ztráty (výsledovka). Hodnoty položek ve výkazu plynou právě ze sumy hodnot jednotlivých účtů účtové osnovy (rozvahových pro rozvahu, výsledovkových pro výsledovku).

Tyto dva výkazy jsou spolu s~přehledem o~pěněžních tocích stěžejním výstupem účetnictví:

\begin{itemize}
	\item výkaz zisku a ztrát -- finanční výkonnost podniku, zachycuje hodnoty a vztahy mezi výnosy podniku a náklady potřebných na jejich vytvoření
	\item rozvaha -- finanční pozice podniku, soupis majetku podniku v~peněžním vyjádření a zdrojů jeho financování
	\item přehled o~peněžních tocích -- zachycuje schopnosti a způsoby vytváření peněžních prostředků a jejich využití
\end{itemize}

\pagebreak
\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/vykazy.png}
  \caption{Výkazy uzávěrky a jejich obsah \cite{komplex}}
\end{figure}

Níže se zle dočíst, že součástí strukturovaných, každoročně odevzdávaných souborů jsou pouze výkaz zisku a ztrát a rozvaha, přehled o~pěněžních tocích (cashflow) nikoliv. Lze jej však z~uvedených výkazů spočítat pomocí tzv. cashflow analýzy. Dále bývá často do uzávěrek zahrnut také přehled o~změnách vlastního kapitálu.

\subsubsection{Výkaz zisku a~ztráty}
Výkaz zisku a~ztráty, také výsledovka, ukazuje, jakého hospodářského výsledku bylo dosaženo v~daném účetním období. Data výsledovky jsou počítány z~dat výsledovkových účtů. Jednotlivé účty jsou kategorizovány podle jejich účelu a~položky výsledovky jsou sumy účtů odpovídající kategorie. Je to jakási agregace záznamů o~pěněžních tocích za celé účetní období, z~nichž každý je buď výnosem nebo nákladem (pozn. není to to samé jako příjmy a~výdaje). Výnosy i náklady jsou dále rozděleny na provozní a finanční činnost. Po sečtení výsledků za obě činnosti získáme pro mnohé nejdůležitější informaci o~hospodaření podniku -- výsledek hospodaření. Tím se rozumí buďto zisk (výnosy převyšují náklady) nebo ztráta (náklady převyšují výnosy). V~případě zisku je navíc subjekt ze zákona povinen odvést daň ze zisku, čímž teprve získáme hodnotu čistého zisku.

\subsubsection{Rozvaha}
Také označována termínem bilance. Na rozdíl od výkazu zisku a~ztráty jsou při sestavování rozvahy data vázána k~jednomu určitému okamžiku, takzvanému rozvahovému dni, který je posledním dnem účetního období, zpravidla posledním dnem kalendářního roku. Data mají tedy statickou povahu.

Hlavními složkami rozvahy jsou aktiva a~pasiva. Zatímco aktiva představují majetek společnosti (budovy, stroje, materiál, vozidla, \dots, ale i software nebo know-how), pasiva jsou zdrojem krytí těchto aktiv (kapitál). V~průběhu roku se hodnota aktiv a~pasiv liší právě o~hodnotu, o~kterou se liší náklady a~výnosy. Při sestavování závěrky se rozdíl nákladů a~výnosů po zdanění přenese na rozvahový účet (představující pasivum) s~názvem hospodářský výsledek ve schvalovacím řízení, čímž se aktiva a~pasiva vyrovnají. Část zisku musí být investována do fondů (ze zákona, případně stanov společnosti), valná hromada poté rozhodne, co se zbytkem. Může navýšit vlastní jmění podniku nebo zisk rozdělit mezi vlastní investory, což je znázorněno na obrázku \ref{ccf}. Hlavním rozdělením aktiv je na krátkodobá a~dlouhodobá, hlavním rozdělením pasiv je na vlastní a~cizí kapitál.




%-----
\section{Absolutní ukazatele}

\subsection{Horizontální analýza}
Při horizontální analýze je určitá položka (řádek) finančního výkazu porovnávána se stejnou položkou za jiné časové období. Při výpočtu tedy porovnáváme výsledky jedné položky napříč různými obdobími - proto horizontální analýza. U~jednotlivých položek zvlášť je vypočtena absolutní hodnota meziroční změny a~její procentuální vyjádření. Tento postup je proti ostatním velmi ilustrativní, působivý a~přímočarý. Této analýze můžeme podrobit výkaz zisku a ztrát, rozvahu i přehled peněžních toků.

Při posuzování výsledků by měl analytik zohlednit významné meziroční změny, které mají vliv na výsledek -- změny v~daňové soustavě, podmínek na trhu, změna politické situace, míra inflace a~podobně. Výsledek je běžně interpretován pomocí sloupcového nebo spojnicového grafu.


\subsection{Vertikální analýza}
Přívlastek vertikální vychází tak jako u~horizontální analýzy ze způsobu zpracování finančních výkazů (opět výkazu zisku a ztrát, rozvahy i přehledu finančních toků). Dáváme tak do poměru jednotlivé položky výkazů. Na rozdíl od poměrových ukazatelů zmíněných dále se však při vertikální analýze dává do poměru část celku k~celku samotnému. Dalo by se tedy říct, že vyčíslováním podílu vybrané části na celku vertikální analýza popisuje strukturální rozložení sledované entity (například aktiv nebo pasiv či jejich složek). 

Výhodou vertikální analýzy je, že není ovlivněna meziroční inflací a~výsledky se tak dají provnávat s~výsledky za jiné časové období, mimo to i s~výsledky jiných podniků.\cite{sedl}






%-----
\section{Poměrové ukazatele}
Výpočet je opět založen na datech z~rozvahy a~výsledovky, existují ale i poměrové ukazatele založené na cashflow. Na rozdíl od horizontální a~vertikální analýzy, při kterých je sledován vývoj jedné veličiny v~čase případně vývoj ve vztahu k~určité vztažné veličině (nadřazenému celku), při výpočtu poměrových ukazatelů zkoumáme vztah mezi jednotlivými veličinami navzájem, čímž získáváme zase jinou vypovídací hodnotu.

Existuje několik různých ukazatelů. Různé ukazatele slouží různým účelům, různé společnosti se řídí různými ukazateli. Podle účelu a~povahy ukazatele ho lze zařadit do některé ze skupin soustavy ukazatelů. V~této práci budou zmíněny základní skupiny poměrových ukazatelů -- rentability, likvidity, aktivity a~zadluženosti, v~rámci nichž budou popsány i jednotlivé ukazatele.

Jak plyne z~názvu, při výpočtu hodnoty ukazatele se obecně používá nějakého poměru, tedy zlomku. Možností, které hodnoty dát do poměru, je takřka neomezeně. Nicméně při konstrukci jednotlivých ukazatelů bychom se měli zamyslet nad tím, co při vybraných entitách vlastně vztah vyčísluje -- zda má konkrétní volba význam pro účel analýzy.\cite{kisling}

%-----
\subsection{Ukazatele rentability}
profitability ratios

Ukazatele rentability (výnosnosti, ziskovosti, návratnosti) patří v~praxi mezi nejsledovanější ukazatele. Vyjadřují míru efektivity hospodaření podniku poměřením výsledku hospodaření se zdroji, které byly na hospodaření vynaloženy.

$$\zl{výsledek hospodaření}{zdroje}$$

Ukazatele rentability jsou mezivýkazovými ukazateli, což znamená, že jsou při jejich výpočtu použity hodnoty z~výsledovky i rozvahy. Jednotlivé ukazatele rentability se liší především tím, co je chápáno pod pojmem zdroje ve jmenovateli.\cite{mendelu} Podle volby jmenovatele je vytvořeno také následující rozdělení ukazatelů rentability. 

V~rámci jednoho ukazatele však existuje několik dalších variant výpočtu. Ty se vzájemně liší složkou v~čitateli, která zachycuje výsledek hospodaření (zisk) v~rozdílných fazích -- před nebo po zdanění, odečtení úroků, provedení odpisů a~amortizace. Do čitatele může být dosazen i jiný ukazatel firemní výkonosti, jako například provozní cashflow. Volíme takové hodnoty, které mají pro danou situaci největší vypovídací hodnotu.

\begin{itemize}
\item EAT -- earnings after taxes, čistý zisk -- zisk po zdanění, zúročení, odpisech a~amortizaci

\item EBT -- earnings before taxes, hrubý zisk -- zisk před zdaněním, t.j. po odečtení úroků, odpisech a~amortizaci

\item EBIT -- earnings before interest and taxes, provozní zisk -- zisk před zdaněním a~zúročením. Uzití této hodnoty je vhodné například při srovnávání dvou podniků s~různou výší daně z~příjmu a~různou kapitálovou strukturou

\item EBITDA -- earnings before interest, taxes, depreciation and amortization -- zisk před zdaněním, úroky, odpisy a~amortizací

\item NOPAT = EBIT$*(1-t)$, kde $t$ je sazba daně z~příjmů  -- zdaněný (čistý) zisk bez odečtení úroků, t.j. kolik by dělal čistý zisk, kdyby podnik nemusel platit úroky (kdyby nečerpal žádný úvěr)
\end{itemize}


\begin{figure}
  \centering
  \includegraphics[width=10cm]{img/zisk.png}
  \caption{Grafická intepretace jednotlivých druhů zisku}
\end{figure}

%-----
\subsubsection{ROA -- rentabilita aktiv}
return on assets

ROA je ukazatel, který do jmenovatele dosazuje celkový objem aktiv (potažmo pasiv, jelikož jsou jimi kryta). Při výpočtu se tedy nebere ohled na to, zda jsou aktiva vlastní nebo cizí, dlouhodobá nebo krátkodobá. Tím vyjadřuje, jak efektivně dokáže podnik naložit s~aktivy, které se do něj vloží (odtud zřejmě plyne označení produkční síla nebo výkonnost podniku).

Nejčastějšími variantami uváděnými v~literatuře jsou ty, které mají v~čitateli hodnotu EBIT, tedy zisk před odečtením nákladových úroků (rentabilita celkových aktiv by neměla brát v~potaz původ zdrojů) a~zdaněním. Tato volba nám zároveň umožňuje porovnat podniky s~rozdílnými zdroji financování a~různým daňovým zatížením.

$$\vz{ROA}{EBIT}{A} \scite{sedl}$$

Další používanou variantou je s~hodnotou NOPAT v~čitateli. Výsledkem je rentabilita, která by plynula z~čistého zisku, pokud by byly veškeré zdroje financování vlastní. Dochází zde k~fiktivnímu zdanění úroků, jelikož EBIT$*(1-t)$ se dá zapsat také jako EAT$+$Ú$*(1-t)$.

$$\vz{ROA}{EBIT $*(1-t)$}{A} \scite{sedl}$$ 


%-----
\subsubsection{ROE -- rentabilita vlastního kapitálu}
return on equity

ROE do jmenovatelele dosazuje hodnotu vlastního kapitálu, čímž vyjadřuje míru jeho zhodncení. Jinými slovy udává, kolik korun zisku připadá na 1 korunu vlastního kapitálu. Pro vlastníky (akcionáře, společníky a~další investory) podniku je jedním z~klíčových ukazatelů, neboť pomocí něj mohou zjistit, zda jimi vložený kapitál přináší výnos odpovídající velikosti jejich investičního rizika.\cite{sedl}

Investor by se měl také zajímat, zda je procentuální hodnota ROE vyšší než bezriziková úroková míra (úroková sazba státních dluhopisů), v~praxi spíše vyšší než nejvyšší úroková sazba nabízená bankami. Pokud by byla nižší, obnos investovaný do podniku by mohl raději vložit do banky a~téměř bez námahy a~bez rizika dosáhnout většího výnosu.

Výpočet má pochopitelně smysl zejména s~čistým ziskem (EAT) v~čitateli, avšak ve jmenovateli můžeme uvažovat nad odečtením fondů, ze kterých investor ve výsledku těžit nebude.

$$\vz{ROE}{čistý zisk}{vlastní kapitál} \scite{sedl}$$ 


%-----
\subsubsection{ROS -- rentabilita tržeb}
return on sales

V~praxi velmi často používaný ukazatel. Poměřuje zisk podniku a~tržby (tržby za prodej zboží, výrobků a~provedení výkonů), tedy kolik procent tržeb tvoří zisk.

Pokud by byla výsledkem relativně malá, dlouhodobě klesající hodnota (např. 2\%), je vhodné zpozornit. Pokud by došlo k~náhlému poklesu tržeb při zachování nákladů (což je běžné), je zřejmé, že se podnik dostane do finančních potíží. Stejnětak se může dostat do potíží při zvýšení nákladů (zdražení materiálu, energií, pracovní síly) se současným zachováním objemu tržeb (zvýšení nákladů se však na tržby zpravidla promítne). 
V~čitateli se nejčastěji používá hodnota EBIT nebo EAT

$$\vz{ROS}{EBIT}{tržby} \scite{sedl} \hspace{2cm} \vz{ROS}{EAT}{tržby} \scite{sedl}$$ 

%-----
\subsubsection{ROI -- rentabilita investice}
return on investment

Další z~často používaných ukazatelů. Jak napovídá název, ukazatel vyjadřuje rentabilitu spíše z~pohledu konkrétního investičního projektu, z~výše sumy investic provedených během vymezeného období, nežli z~celopodnikového pohledu. Oba přístupy by pojednávaly o~tom samém v~případě, že by se jednalo o~investici do koupi podniku. Rentabilita této investice by pak byla stejná jako rentabilita vlastního kapitálu, v~případě nezadluženého podniku i stejná jako rentabilita celého podniku.

$$\vz{ROI}{výnos investice}{náklady na investici} \scite{sedl} $$ 

%-----
\subsubsection{Některé další ukazatele rentability:}
\begin{itemize}
\item{ROC -- rentabilita nákladů} -- return on costs
\item{ROCE -- rentabilita dlouhodobě investovaného kapitálu} -- return on capital employed
\end{itemize}







%-----
\subsection{Ukazatele likvidity}
Pojem likvidita bývá nesprávně zaměňován s~úzce souvisejícími pojmy likvidnost a~solventnost. Likvidnost je vlastnost jednotlivých složek aktiv podniku vyjadřující schopnost přeměny těchto složek v~peněžní prostředky v~co nejkratším čase a~s~minimálními ztrátami.\cite{nyvlt} Přeměnou můžeme rozumět například prodej zásob nebo inkasování pohledávek. 

Solventnost neboli platební schopnost je definována jako schopnost subjektu, v~našem případě podniku, včas splácet své finanční závazky. Má-li být podnik solventní, musí kromě stálého generování zisku také zajistit, aby byla část aktiv vázána ve formě, kterou může uhradit své závazky.

Likvidita podniku dává tyto pojmy do souvislosti -- ukazatele likvidity vyjadřují schopnost podniku přeměnit vybraná aktiva na peněžní prostředky (využít jejich likvidnosti) za účelem včasného uhrazení všech splatných závazků (a tím pádem být dočasně solventní).\cite{schol} Proto bývají také označovány jako ukazatele platební schopnosti.

Všechny ukazatele likvidity se počítají jako poměr toho, čím je možné platit (disponibilní prostředky), k~tomu, co se musí zaplatit. Disponibilními prostředky můžeme přitom chápat různou množinu aktiv. Je samozřejmě nesmysl, aby byla zahrnuta ta aktiva, jejichž ztráta by ohrozila chod podniku.

%-----
\subsubsection{Běžná likvidita (likvidita III. stupně)} 
CR - Current Ratio

Poměr ukazuje, kolikrát pokrývají oběžná aktiva krátkodobé závazky, jinými slovy, kolikrát je podnik schopen uhradit své krátkodobé závazky z~peněžních prostředků, které by získal přeměnou z~oběžných aktiv.

Uváděná optimální hodnota se v~literaturách různí, zřejmě se bude lišit i v~závisloti na typu podniku. Hodnota ukazatele by určitě neměla být menší než 1, což by znamenalo nutnost financovat závazky z~dlouhodobých zdrojů financování a~jinými nevhodnými způsoby. Také berme v~potaz, že po pokrytí závazků by měly zbýt prostředky pro další činnost podniku.
Optimální hodnota uvedená v~preferovaném zdroji je CR$\geq 1.5$, ale obecně lze tvrdit, že čím stabilnější jsou příjmy a~čím jistější jsou zdroje těchto příjmů, tím více se může hodnota běžné likvidity blížit jedné.\cite{businessvize_bez_likv}

$$\vz{CR}{oběžná aktiva}{krátkodobé závazky} \scite{sedl}$$

%-----
\subsubsection{Pohotová likvidita (likvidita II. stupně)} 
QAR - Quick Asset Ratio

Pokud bychom zkoumali strukturu oběžných aktiv, zjistili bychom, že se likvidnost jednotlivých složek liší. Výpočet běžné likvidity zahrnuje i zásoby, nicméně ty při výpočtu pohotové likvidity nejsou zahrnuty, jelikož většinou bývají nezbytné pro zachování chodu podniku a~navíc jejich likvidnost nemusí být dostačující.
V~čitateli tak zbude součet objemu peněžních prostředků, ekvivalentů a~pohledávek. Pro zpřesnění výsledku je vhodné odečíst nedobytné pohledávky.
Dá se předpokládat, že podniky z~oblasti služeb nebudou mít v~zásobách mnoho aktiv a~proto se bude hodnota ukazatele blížit hodnotě běžné likvidity. U~výrobních podniků se naopak tyto dvě hodnoty budou spíše lišit.

$$\vz{QAR}{oběžná aktiva $-$ zásoby}{krátkodobé závazky} \scite{sedl}$$

%-----
\subsubsection{Hotovostní likvidita (likvidita I. stupně)}
CPR - Cash Position Ratio

Při výpočtu hotovostní likvidity dosazujeme do čitatele součet jen těch nejlikvidnější složek oběžných aktiv, kterými jsou pěněžní prostředky (peníze v~hotovosti a~na běžných účtech) a~jejich ekvivalenty (například šeky nebo obchdovatlné cenné papíry).
Přestože tento ukazatel nejlépe vypovídá o~platební schopnosti podniku k~určitému datu, nebere v~potaz strkuturu krátkodobých závazků, především z~pohledu jejich skutečné splatnosti.\cite{mendelu} Pokud bychom chtěli tuto skutečnost zohlednit, měli bychom do jmenovatele zahrnout pouze okamžitě splatné závazky. Taková varianta bývá označována jako okamžitá likvidita.


$$\vz{CPR}{peněžní prostředky $+$ ekvivalenty}{krátkodobé závazky} \scite{sedl}$$








%-----
\subsection{Ukazatele aktivity}
Další z~mezivýkazových ukazatelů -- vstupními daty jsou položky jak z~výkazu zisku a~ztrát tak z~rozvahy. Ukazatele aktivity vyjadřují, jak efektivně podnik nakládá se svými aktivy. Pokud jich vlastní více, než je nutné, vznikají zbytečné náklady a~dochází ke snižení zisku. Jestliže jich má nedostatek, přichází o~výnosy z~potenciálních zakázek, o~které se kvůli nedostatku aktiv nemůže ucházet.

Výsledkem je hodnota udávající rychlost nebo dobu obratu. Rychlost obratu vyjadřuje, kolikrát se určitá složka aktiv přemění za sledované období na peněžní prostředky. Doba obratu nám říká, jak dlouho trvá přeměna.

Pokud známe hodnotu rychlosti obratu sledovaných aktiv X, dobu obratu X (výsledkem budou dny) vypočítáme jednoduše jako 

$$\vz{doba obratu}{365}{rychlost obratu X}$$


%-----
\subsubsection{Obrat celkových aktiv}
total assets turnover

Udává, kolikrát se obrátí celková aktiva za sledované časové období. Nevýhodou tohoto a~některých dalších ukazatelů je povaha vstupních veličin: tržby jsou zachyceny jejich sumou za celé období, kdežto hodnota aktiv se vztahuje ke konkrétnímu časovému okamžiku, kdy byla rozvaha vytvořena. Přesnějšího výsledku by se dalo dosáhnout použitím průměrné hodnoty sledovaných aktiv. 

$$\vz{obrat celkových aktiv}{tržby}{celková aktiva} \scite{mendelu}$$

%-----
\subsubsection{Obrat stálých aktiv}
fixed assets turnover

Stálá aktiva jsou taková, která slouží podniku déle než jeden rok a~jsou spotřebovávána postupně, nikoliv jednorázově. Konkrétně je to součet dlouhodobého hmotného, nehmotného a~finančního majetku, t.j. například budovy, pozemky, vozidla, stroje, software, know-how a~mnoho dalších.

Ukazatel potom vyjadřuje míru využití těchto aktiv. Pokud při analýze vyjde hodnota nižší, než je průměr v~odvětví, může to znamenat nedostatečné využití stávajících fixních (dlouhodobých) aktiv a~manažeři by tak měli zvážit, jak jejich využití zefektivnit namísto investování do aktiv nových.

$$\vz{obrat stálých aktiv}{tržby}{dlouhodobý majetek} \scite{mendelu}$$

%-----
\subsubsection{Obrat zásob}
inventory turnover

Říká, kolikrát je za sledované období položka zásob prodána a~opět naskladněna.

Při použití tohoto ukazatele je nutné si uvědomit, že tržby vyjadřují tržní hodnotu (za kolik se prodalo), kdežto hodnota zásob bývá vyjádřena jejich pořizovací cenou (za kolik se nakoupilo). Přesnějšího výsledku obratovosti může být dosaženo umístěním nákladů na prodané zboží do čitatele namísto tržeb.

Ukazatel pro zásoby výrobků nebo zboží je rovněž ukazatelem likvidnosti těchto zásob (udává, jak dlouho trvá přeměna zásob na finanční prostředky).

$$\vz{obrat zásob}{tržby}{zásoby} \scite{mendelu}$$


%-----
\subsubsection{Doba obratu pohledávek}
V~tomto případě je směrodatnější spíše doba trvání pohledávky než počet obratů pohledávek. Doba se vypočítá jako poměr průměrného stavu pohledávek k~průměrné denní tržbě na obchodní úvěr (fakturu, \uv{sekeru}).

Hodnota ukazatele dlouhodobě vyšší než hodnota stanovená platebními podmínkami pro klienta může znamenat problémové portfolio odběratelů, kteří nejsou schopni plnit své závazky včas.

$$\vz{doba obratu pohledávek}{prům. stav pohledávek}{prům. denní tržby} \scite{mendelu}$$

\subsubsection{Doba obratu závazků}
Průměrná doba odkladu plnění závazků. Nabízí se porovnání s~dobou obratu pohledávky. 





%-----
\subsection{Ukazatele zadluženosti}

Zadluženost podniku souvísí s~velikostí podílu cizích zdrojů na všech zdrojích financování podniku, jelikož cizí zdroje pro podnik zpravidla znamenají dluh, závazek. Měří tedy dopady financování cizími zdroji. Využití cizích zdrojů se vyplácí, dokud zajistí výnos vyšší, než jsou náklady na tyto zdroje -- úroky.

V~praxi se běžně nesetkáme s~většími podniky, které by byly financovány výhradně z~vlastních nebo výhradně z~cizích zdrojů, jsou tedy do jisté míry zadluženy. Zadluženost obecně není negativní charakteristikou -- využití cizích zdrojů vede k~zesílení tzv. finančního pákového efektu, který pozitivně přispívá k~rentabilitě vlastního kapitálu.\cite{kisling} S~rostoucím procentem vyjadřujícím zadluženost však roste i riziko věřitelů. Čím vyšší bude riziko věřitelů, tím obtížněji bude podnik další cizí zdroje získávat a~tím nevýhodnější budou podmínky jeho poskytnutí.\cite{mendelu} Jedním z~důležitých cílů finanční analýzy je nalezení ideální míry zadluženosti respektive ideálního rozložení finanční struktury. Vzhledem k~poměrně rozšířenému leasingovému financování zmíním, že by bylo vhodné takto pořízený majetek zohlednit a~přičíst k~cizímu kapitálu, má-li významnější objem.

\begin{figure}
  \centering
  \includegraphics[width=15cm]{img/tab.png}
  \caption{Srovnání výnosnosti při různém poměru vlastního a~cízího kapitálu}
\end{figure}

% \begin{figure}
%   \centering
%   \begin{tabular}{ C{11mm}  C{13mm}  C{12mm}  C{11mm}  C{11mm}  C{18mm}  C{11mm}  C{11mm}  C{12mm} }
%     \hline
%     Firma & Vlastní kapitál & Cizí kapitál & ROA (20\%) & Úroky (8\%) & Zisk nezdaněný & Daň (40\%) & Zisk čistý & ROE \\ 
%     \hline
%     A & 2000 & -- & 400 & 0 & 400 & 160 & 240 & 12\% \\
%     B & 1000 & 1000 & 400 & 80 & 320 & 128 & 192 & 19,20\% \\
%     \hline
%   \end{tabular}
%   \caption{Srovnání výnosnosti při různém poměru vlastního a~cízího kapitálu}
% \end{figure}


%-----
\subsubsection{Celková zadluženost}
debt ratio

Základním ukazatelem zadluženosti je celková zadluženost jako podíl cizího kapitálu na celkových aktivech. S~rostoucí hodnotou tohoto ukazatele roste i riziko věřitelů a~cena za cizí kapitál (výše úroků). Věřitelé preferují nižší hodnoty -- v~případě likvidace podniku mohou být pohledávky (nejen) věřitelů uhrazeny z~vlastního kapitálu podniku (takzvaný finanční polštář).
Z~hlediska vlastníků akcií jsou vysoké hodnoty ukazatele příznivé, dokud podnik dosahuje vyššího procenta rentability než je procento úroku na cizí kapitál, což znamená, že výsledné zhodnocení kapitálu je vyšší než jeho pořizovací cena.\cite{such}

$$\vz{DR}{cizí kapitál}{celková aktiva} \scite{sedl}$$

\vspace{3mm}
Doplňkovým ukazatelem k~celkové zadluženosti je ukazatel poměru vlastního kapitálu (equity ratio, ER). Jejich součet by měl být DR$+$ER$
\doteq 1$

$$\vz{ER}{vlastní kapitál}{celková aktiva} \scite{sedl}$$

%-----
\subsubsection{Koeficient (míra) zadluženosti}
debt to equity ratio

Dá se spočítat jako poměr hodnoty cízího kapitálu k~hodnotě vlastního. Stejný výsledek bychom získali poměrem předchozích dvou ukazatelů. V~případě, že podnik využívá ve větším objemu leasingového financování, je vhodné tuto skutečnost zohlednit přičtením objemu k~cizímu kapitálu. 

$$\vz{DtE}{cizí kapitál}{vlastní kapitál} \scite{sedl}$$

\vspace{3mm}
Ve finanční analýze se používá i převrácená hodnota ukazatele, která by se dala nazvat jako míra finanční samostatnosti podniku.

%-----
\subsubsection{Úrokové krytí}
interest coverage

Ukazatel vyjadřuje, kolikrát podnik pokryje úroky plynoucí ze závazků věřitelům poté, co uhradí všechny náklady na provoz (tzn. z~provozního zisku). Dá se tedy chápat jako dopad zadlužení na zisk. Obecně platí, že čím vyšší je jeho hodnota, tím lépe pro podnik. Pokud by byla hodnota IC$<1$, znamená to, že podnik hospodaří se ztrátou (není schopen ani pokrýt úroky). Pokud by vyšla hodnota ukazatele IC$=1$, znamená to, že se veškerý zisk použije k~uhrazení úroků za vypůjčený kapitál a~k~vyplacení vlastních investorů nebo k~reinvestici do kapitálu nezbudou žádné prostředky.

$$\vz{IC}{EBIT}{nákladové úroky} \scite{sedl}$$








\section{Ostatní}

\subsection{Analýza peněžních toků}
Rozvaha zachycuje stav majetku a jeho krytí (kapitálu) ve chvíli jejího vytváření. Výkaz zisku a ztráty zase zaznamenává různé kategorie výnosů a nákladů a z nich plynoucího zisku či ztráty za určité období, nehledě na to, zda se jedná o reálné peněžní příjmy či výdaje. Proto se neshodují výnosy s příjmy, náklady s výdaji a zisk či ztráta se změnou stavu peněžních prostředků. Pro tento účel slouží analýza peněžních toků, jejíž podstatou je sledování změn stavu peněžních prostředků.\cite{komplex} Z toho lze vyvodit, ze úzce souvisí s řízením likvidity podniku.



Přehled peněžních toků jsme schopni vytvořit z~výkazu zisku a ztrát a rozvahy. Peněžní toky lze rozdělit do celkem tří kategorií podle druhu činnosti podniku, pod které spadají. Jsou to:

\begin{itemize}
  \item provozní činnost -- 
  \item investiční činnost -- poskytuje přehled o pohybu peněžních prostředků v souvislosti s dlouhodobými aktivy a také dalšími skupinami, které hrají významnou roli při vytváření zisků v budoucnu
  \item financování podniku -- pohyby peněžních prostředků ovlivňující strukturu a velikost vlastního či cizího jmění podniku
\end{itemize}



\subsection{Du Pont rozklad}
Tato analýza se řadí mezi pyramidové soustavy ukazatelů. Zatímco výsledky všech předchozích analýz byla většinou konkrétní čísla, pyramidové soustavy ukazatelů nám davají tato čísla do souvislostí odpovídajících realitě. Namísto čísla zachycujícího jediný rys složitého procesu zachycuje tato analýza všechny závislosti a vztahy uvnitř procesu. Jedná se o~rekurzivní rozklad výpočtu finančního ukazatele na podsložky, což nám umožňuje sledovat faktory ovlivňující výsledek na všech úrovních, nebo naopak zjistit, na které podsložky se zaměřit pri snaze o~dosažení změny na vyšší úrovni. Zápis rozkladu může být samozřejmě vyjádřen matematicky, velmi vhodná je i jeho grafická reprezentace.

V~případě analýzy Du Pont se provádí rozklad ukazatele rentability vlastního kapitálu (ROE). Schéma rozkladu je vidět na obrázku \ref{dupont}. Na nejnižší úrovni se na levé straně objevuje rentabilita tržeb, označována také jako zisková marže, která udává podíl čistého zisku na tržbách (zohlednění nákladů). Pokud tržby rostou a zisková marže klesá, je vhodné provést analýzu nákladů. Složky na pravé straně poté tuto marži dávají do souvislosti s~majetkem firmy. Vynásobením obratovostí aktiv získáme jejich rentabilitu, následným zohledněním struktury kapitálu získáme rentabilitu vlastního kapitálu.

\begin{figure}
  \centering
  \includegraphics[width=11cm]{img/dupont.png}
  \caption{Rozklad Du Pont \cite{ruck} (FP -- finanční páka, OA -- obrat aktiv)}
  \label{dupont}
\end{figure}

\subsection{Vnitřní výnosové procento}
internal rate of return

Vnitřní výnosové procento vyjadřuje míru výnosnosti investice, tedy ROI, se současným zohledněním proměnné hodnoty peněz v~čase (diskontace). Ve světě patří spolu s~NPV (net present value, čistá současná hodnota) mezi nejpoužívanější ukazatele pro zhodnocení a~výběr investice. Podle průzkumu VŠE je v~ČR preferován spíše ukazatel doby návratnosti investice.\cite{businessvize_irr}

NPV slouží k~přiblížení, kolik peněz nám projekt, jehož investování zvažujeme, za sledované období přinese nebo sebere. Nebere přitom nijak v~úvahu výnosy a~náklady nebo hodnotu společnosti, proto je nevhodný pro strategické projekty. Nevýhodou NPV a~tím pádem i IRR je nutnost odhadu nejen budoucích finančních toků, které sledovaný projekt přinese, ale také výše diskontu. Odhad hodnoty lze zpřesnit různými technikami (viz doporučená literatura). Důležitá je také odhadovaná doba životnosti projektu, přidáním nebo odebráním jednoho období se může změnit ztráta na zisk i opačně.

Nejprve si uvedeme vzorec pro výpočet čisté současné hodnoty: 
\\($r=$diskont, $t=$pořadí období, $CF_t$=suma toků v~období, $IN=$vstupní investice)
$$NPV=\sum\limits_{t=0}^{n} \dfrac{CF_t}{(1+r)^t} = \sum\limits_{t=1}^{n} \dfrac{CF_t}{(1+r)^t} - IN\scite{businessvize_irr}$$

Matematicky lze IRR vyjádřit hodnotou diskontní sazby, při které je čistá současná hodnota (NPV) rovna nule. Dostáváme tedy následující vzorec:
$$\sum\limits_{t=1}^{n} \dfrac{CF_t}{(1+IRR)^t} - IN = 0 \scite{businessvize_irr}$$

Z~uvedeného vzorce lze usoudit, že nalezení hodnoty analytickým řešením není triviální. Rovnice se řeší numericky, iterativními výpočty.








































\chapter{Návrh řešení}



\section{Existující software}
Před návrhem řešení bylo vhodné prozkoumat existující řešení. Plné verze nástrojů pro tyto účely bývají zpoplatněny, závěry jsou tedy vyvozeny ze zkušebních verzí, pochopitelně s~omezenou funkcionalitou, případně z~náhledů a~uživatelských dokumentací software.

Všechny testované nástroje jsou ve formě desktopových aplikací určených pouze pro platformu Windows. Po rozpravě s~analytikem? z~praxe, velmi často je k~účelům analýzy používán program Excel. Příčinou je nejspíš široká základna uživatelů, kteří v~jeho prostředí zvládají alespoň základní úkony s~daty a také široké spektrum funkcionality, které zahrnuje i výpočty z~oblasti finanční analýzy.

\subsubsection{FAF -- Finanční analýza firmy}
Software nelze bez zakoupení jakkoliv používat, nicméně na webových stránkách je dostupné instruktážní video a~uživtelská přiručka popisující jak nástroj vypadá, jak se s~ním pracuje a~co všechno dokáže. Uživatelské rozhraní vypadá na první pohled zastarale, to ale nijak neubírá na přehlednosti.

Uživatelské rozhraní kromě grafů využívá také stupnic, na které umisťuje ukazatele. Je zde obrazovka \uv{rating}, což jsou různé ukazatele, každý z~ukazatelů je zobrazen za různá časová období a~v~konkrétním časové období na stupnici od 1 do 10. Všechny ukazatele pohromadě lze zobrazit v~tabulce pro jedno časové období.

Ukazatele jsou i na obrazovce s~trendy, ta mimo ukazatele obsahuje i trendy položek výkazu zisku a~ztráty a~rozvahy. Je zde také zobrazen seznam rizikových faktorů. Ty se od ukazatelů liší tím, že jsou buďto v~pořádku nebo ne, nic mezi tím (např. skutečnost, že podnik hospodaří se ztrátou).

Nástroj dále umožňuje vertikální analýzu, horizontální analýzu, analýzu cash flow a~výpočet hodnoty firmy.

Funkcionalita, která mě nejvíce zaujala, je nazvaná \uv{co když}. Spočívá v~umožnění uživateli jednoduše manipulovat se vstupními daty analýzy a~zároveň sledovat, jaký dopad by se měla tato změna na hodnotu ukazatelů.

Hodnoty z~ výkazu zisku a~ztráty a~rozvahy jsou zadávány do tabulky. Instruktážní video ani uživatelská příručka nehovoří o~tom, zda nástroj podporuje automatizované načítání výstupních dat z~některých jiných nástrojů z~oblasti financí (např. účetních).

Dalším nedostatkem byla sekce s~vysvětlením pojmů. Všechny pojmy jsou na jedné hromadě, na konkrétní pojem se nelze prokliknout.


\subsubsection{Equanta}
Zatímco FAF je pravděpodobně výtvorem jednoho nebo malé skupiny vývojářů a~jsou v~něm obsaženy pouze klíčové metody a~ukazatele finanční analýzy (které ale ve většině případů stačí), Equanta je mnohem sofistikovanějším nástrojem, za jehož vývojem nejspíš stojí větší počet vývojářů -- společnost ATLAS consulting s.r.o. . Ta má ve svém portfoliu i jiné, nejen finančně zaměřené nástroje.

Equanta má o~poznání modernější rozhraní, obsahuje i více sekcí, ukazatelů a~pohledů na hospodaření podniku. Obsahuje také automatizované načítání vstupu, a~to nejen z~ výkazu zisku a~ztráty a~rozvahy ve formátu pro finanční úřad, ale i z~účetních dat nástrojů jako je Pohoda. V~nástroji je možné provádět mezipodnikové srovnání úzávěrek a~ukazatelů, které se v~praxi používá relativně často.

Nástroj si pamatuje naposledy ovtevřené dokumenty, tyto dokumenty lze seskupovat pod projekty, jsou zde zpřístupněna různá nastavení a~další možnosti personalizace, což implikuje využití persisentních dat. To je proti nástroji FAF další velkou výhodou. 


\subsubsection{FinAnalysis}
Nástroj je realizován jako přednastavená šablona v~tabulkovém prostředí MS Excel. Toto řešení může být rýchlé a~efektivní, nicméně pro naše účely naprosto nevyhovující, jelikož je jeho používání podmíněno používáním MS Excel. Nástroj je prostředím svého běhu omezen, veškerá rozšíření je nutné implementovat funkcemi Excelu.

Přesto nástroj plní svůj ůčel a~lze se v~něm inspirovat možnostmi provádení základních analýz, výpočty mnoha ukazatelů a~interpretací výsledků. Jednotlivé sekce jsou realizovány jako listy v~Excelu. První tři listy (list s~vúkazem zisku a~ztáty, rozvahou a~list se základními údaji jako například počet zaměstnanců) slouží k~zadávání dat. Zbývající listy obsahují výsledky, jsou pouze pro čtení a~odpovídají rozdělení podle jednotlivých typů analýzy. Použití programu Excel je v~oblasti financí velmi časté.



%-----
\section{Vybrané metody vyhodnocování}
Nástroj by měl být schopen provádět analýzu alespoň v~rozsahu teoretické části této práce. Podoba výstupu se mění v~závislosti na vybrané analýze nebo ukazateli. Výstupem může být absolutní hodnota, finanční částka, procentuální podíl, tabulka s~těmito hodnotami v~čase, graf s~vývojem hodnot v~čase. 


\subsubsection{Vertikální a~horizontální analýza}
Hned jako první se nabízí porovnání s~hodnotami za předchozí období, tedy horizontální analýza. Při horizontální analýze jedné položky výkazu zisku a~ztráty nebo rozvahy se nejčastěji používá sloupcového (v~případě více sledovaných období spojnicového) grafu. Nástroj bude umožňovat i hromadnou horizontální analýzu -- výsledek bude interpretován tabulkou; meziroční změna u~jednotlivých položek bude vyjádřena absolutní i procentuální hodnotou. 

Podobně i pro vertikální analýzu. Pokud bychom chtěli analyzovat pouze užší část vákazu zisku a~ztráty nebo rozvahy, můžeme výsledky interpretovat v~grafech. Výsledky hromadné analýzy budou zobrazeny v~tabulce s~vyjádřením změn absolutní i procentuální hodnotou.

\subsubsection{Poměrové ukazatele}
Možnosti zobrazení poměrových ukazatelů budou podobné jako v~testovaných nástrojích.
Pro interpretaci hodnot poměrových ukazatelů budou využity:
\begin{itemize}
	\item stupnice
	\item tabulka s~přehledem hodnot ukazatelů
	\item tabulky s~trendy
	\item grafy (sloupcové, spojnicové, koláčové a~další)
\end{itemize}

Hodnoty ukazatelů půjde porovnat meziročně i mezipodnikově. Jelikož  Velmi vhodné by bylo také zobrazení a porovnání s~průměrnými hodnotami v~odvětví, které jsou počítány kvartálně MPO v~rámci finanční analýzy podnikové sféry.


\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/ucd.pdf}
  \caption{Use case diagram navrhované aplikace}
\end{figure}

%-----
\section{Návrh programového řešení}

Nástoroj nebude sloužit vyloženě jen pro dávkové zpracování dat. Půjde o~systém pro podnikatele, manažery a~analytiky, ve kterém bude možné pod určitým uživatelským účtem evidovat informace o~hospodaření různých podniků za různá časová období. Nástroj bude schopen načtená data uložit a~svázat s~daným uživatelským účtem, což umožní nejen jednoduchý přístup k~těmto datům a~jejich kvantitativní analýze, ale i jednoduchou správu dat pro meziroční a~mezipodnikové srovnání. Díky webovému rozhraní, což činí tento nástroj v~oboru jedinečným, bude možné přistupovat k~systému a~využívat jeho služeb kdykoliv a~odkudkoliv.

\subsection{Zadávání vstupních dat}
Vstupem kvantitativní finanční analýzy jsou data z~dokumentů výkaz zisku a~ztráty a~rozvaha. Při hledání vhodného způsobu automatizace načítání vstupních dat bylo zjištěno, že jsou subjekty zapsané v~obchodním rejistříku ze zákona povinny každoročně tyto dva dokumenty odevzdávat pro evidenci státním orgánům. 
Odevzdávají se ve dvou formách. Pvní z~nich je ve formátu PDF na krajský soud, v~jehož obchodním rejistříku je subjekt evidován. Formát PDF je určen spíše ke zpracování člověkem, pro parsování dat není vhodný. Naštěstí pro nás jsou subjekty povinny dokumenty odevzdávat také na daňovém portálu, spolu s~daňovým přiznáním, ve strukturovaném formátu XML. Přestože se v~podnikové sféře používají pro účtování různé nástroje (Pohoda, MRP, \dots), dá se očekávat, že většina z~nich bude schopna tyto dva dokumenty vytvořit ve shodě s~uváděnou specifikací s~názvem DPPDP8, případně nižší verze pro starší závěrky.

Vzhledem k~této skutečnosti bude v~nástroji umožněno automatické načítání těchto souborů implementací odpovídajícího parseru, čímž výrazně usnadníme zadávání. Uživateli bude samozřejmě ponechána možnost hodnotu všech položek rozvahy a~výsledovky vyplnit ručně. Údaje ostatních společností jsou sice zveřejňovány, nicméně už jen ve formátu PDF, pro možnost mezipodnikového srovnání je tedy ruční zadávání dat závěrky nezbytné.

Pro jednoduchost a demonstraci bude evidence výkazů obsahovat maximálně jednu sadu výkazů na jeden rok, pro meziroční srovnání.



%-----
\subsection{Architektura}
Byla zvolena architektura klient-server, s~webovým uživatelským rozhraním. V~dnešní době, kdy je vysokorychlostní internet spíše pravidlem nežli vyjímkou, je tato architektura využívána stále více. Motivací je také fakt, že žádný z~hledaných analytických nástrojů tuto architekturu nevyužívá, přestože ve spoustě jiných oblastí se jedná o~preferované řešení, které uvítají vývojáři a především uživatelé. Existují samozřejmě oblasti, pro které je tato architektura nedostačující. Po prostudování teoretického podkladu této práce si však troufám tvrdit, že v~případě finanční analýzy je toto řešení realizovatelné. 

Webové rozhraní má samozřejmě své výhody -- uživatel může k~programu přistupovat odkudkoliv (také z~různých operačních systémů), používání programu není podmíněno jeho instalací a~z~pohledu vývojáře je mnohem jednodušší jeho údržba (nasazování nových verzí). Další výhodou jsou široké možnosti využití jazyka JavaScript -- nejen v~prohlížeči, ale i na serverech (Node.js) a v~desktopových (Electron) i mobilních (React Native) aplikacích. To signalizuje vysokou míru znovupoužitelnosti napsaného kódu. 

Nevýhodou je samozřejmě nutnost připojení k~internetu, tu však částečně odbourává koncept SPA popsaný v~dalším odstavci a~možnost uložení veškerého kódu spojeného s~aplikací do lokálního uložiště, tato možnost ale nebude součástí základního návrhu. Problémem by se mohlo zdát i prostředí běhu, webový prohlížeč. Efektivita intepretace, nebo spíše překladu JavaScript kódu se však neustále zdokonaluje a~skutečnost, že aplikace není v~nativním kódu, je téměř nepostřehnutelná. 

Nástroj bude koncipován jako single page application (SPA). To znamená, že při interakci s~uživatelem bude stránka překreslována dynamicky na straně klienta, namísto opakovaného nahrávání programového kódu (webových stránek) ze serveru. Tato technika vyžaduje načtení veškerého kódu aplikace při jediném načtení stránky a~dodatečné načítání uživatelských dat ve chvíli, kdy jsou potřeba. Přináší však mnohem plynulejší práci s~uživatelským rozhraním, které se blíží desktopovému provedení -- odezva aplikace se zdá rychlejší, uživatel nemusí čekat při akci vedoucí ke změně UI, která by normálně vedla k~načtení veškerého kódu stránky ze serveru. To je také důvod, proč je SPA v~dnešní době široce využíváno při implementaci rozsáhlejších aplikací nebo systémů běžících ve webovém prohlížeči. 


\begin{figure}
  \centering
  \includegraphics[width=10cm]{img/spa.png}
  \caption{Schéma datového toku single page application (SPA)}
\end{figure}

%-----
\subsubsection{Uživatelské rozhraní}


Uživateli bude umožněno vytoření vlastního účtu pro zpřístupnění rozšířené funkcionality. Přihlášením k~uživatelskému účtu systém pozná, kdo s~ním pracuje. To přináší mnoho možností personalizace a~možnost přizpůsobit obsah dle nastavených předvoleb. Uživatelský účet představuje osobu finančního analytika, manažera nebo podnikatele. S~účtem budou svázana i data za jednotlivá časová obdoví v~minulosti, která lze nahrát a~uchovat pro další použití, například porovnání nebo zpřesnění analýzy v~budoucnu. Bude také zváženo jednorázové zpracování dat pro nepřihlášeného uživatele -- načtení vstupu a~prohlížení výsledků, případně dodatečné upravení vsutpu, který se však po skončení běhu aplikace zahazuje.

Je žádoucí, aby přihlášení přetrvalo mezi jednotlivými chody aplikace, při znovunačtení stránky i při vypnutí a~zapnutí prohlížeče. K~tomuto účelu bude využito lokální uložiště (local storage), které umožňuje zápis limitovaného objemu dat do zařízení klienta. Ukládat se samozřejmě nebude jméno ani heslo, ale takzvaný api token pro komunikaci, který je uživateli udělen serverem po úspěšné autentizaci.

Domovskou stránkou pro přihlášeného uživatele bude obrazovka s~přehledem podniků, které jsou pod jeho účtem evidovány. Podniky mohou být přidávány a~odebírány, slouží především pro seskupování účetních závěrek a jejich následnou analýzou. Po výběru podniku se uživatel dostane na obrazovku s~přehledem nahraných závěrek, přičemž závěrkou se myslí právě výkaz zisku a~ztrát a~rozvaha. Závěrky lze přidávat, odebírat a~upravovat jejich data, v~základu jedna závěrka na jedno účetní období, čili jeden rok. Při přidávání závěrek lze zvolit mezi načtením dat z~XML souboru se strukturou DPPDP nebo ručním vyplněním buněk tabulek. Ty bude použita i pro editaci již nahraných nebo zadaných dat.  

Vzhledem k~nejedotné terminologii napříč celou finanční analýzou je žádoucí, aby při zobrazování výstupu uživatel bezpečně zjistil, co se daným pojmem myslí, co daný výsledek reprezentuje. To bude zajištěno výčtem alternativních označení (a možností vložení a~výběru vlastního označení), případně možností přímo přejít do sekce, kde jsou jednotlivé ukazatele detailně vysvětleny. K~tomuto účelu může být použit text z~teoretické části této práce.

Jelikož různé podniky sledují různé ukazatele, je žádoucí, aby nástroj uživateli umožnil vybrat zobrazované/preferované ukazatele. S~podniky a~odvětvími se liší také optimální hodnota konkrétního ukazatele, případně hodnoty hraniční. Tyto hodnoty nelze stanovit obecně, v~literatuře se různí.


\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/gui_mockup.png}
  \caption{Domovská obrazovka, detail podniku a detail investice}
\end{figure}

%-----
\subsubsection{Serverová část}
Serverová část bude sloužit k~uchovávání persisentních dat a~uspokojování požadavků klienta. Persistentními daty jsou vytvořené investice, data investic, podniky, v~rámci podniku nahrané výkazy, rovněž je nutné vést databázi uživatelů samotných.


\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/erd.png}
  \caption{ERD na fyzické úrovni}
\end{figure}

Dále bude server obsluhovat požadavky klienta. Vzhledem k~tomu, že je nástroj koncipován jako SPA (single page application), ke stažení veškerého kódu aplikace ke klientovi bude sloužit jeden jediný endpoint. Klient tak bude moci s~nástrojem pracovat bez dodatečného volání serveru, vyjma operací nad daty, jejichž uložiště ja na serveru. Server bude dále zpřístupňovat rozhraní pro CRUD operace nad těmito daty.

Zda se budou výpočty provádět na straně serveru nebo klienta se rozhodne až při implementaci a~testování. Preferovaný je výpočet na straně klienta, při většině metod analýzy se neprovádějí náročné výpočty a~objem zpracovávaných dat je relativně malý. Přesto je však potřeba dbát na to, aby zátež u~klienta nebyla znát. 



%-----
\subsection{Knihovny a~technologie}
K~implementaci bude použita kombinace programovacích, skriptovacích, značkovacích a~dotazovacích jazyků. Pro klientskou část jsou to HTML, CSS a~Javascript (přesněji TypeScript). Kód serveru bude v~jazyce PHP s~připojením na MySQL databázi.


\subsubsection{React}
React je populární frontendová knihovna v~jazyce JavaScript vyvíjená společností Facebook. Jejím jediným cílem je tvorba uživatelského rozhraní pomocí komponent, jejichž kód je zapsán deklarativně -- spíše definujeme, co se má udělat (jak má komponenta vypadat) a~ne jak se to má udělat (to za nás řeší životní cyklus komponent). Při změně modelu, který je uložen v~JavaScriptu, React na základě definice komponent pozná, které komponenty (a na pozadí tedy i uzly DOM) to ovlivní, a~překreslí pouze ty. Velkou výhodou je tedy oddělení modelu od prezentační vrstvy (v~případě jQuery je model uložen přímo v~HTML) se současným použitím deklarativního zápisu.

Systém komponent nás kompletně odstíní od manipulace s~DOM, což bývá v~případě komplexních UI, i s~pomocí jQuery, velmi nepohodlné. Aplikace manipulující přímo s~DOM jsou také velmi náročné na údržbu (změna na jednom místě vede k~změnám na mnoha jiných místech) a~její části hůře znovupoužitelné.


\subsubsection{Typescript}
Jedná se o~nástavbu jazyka JavaScript vyvíjenou společností Microsoft, jejíž hlavním přínosem je statické typování a~další techniky známé z~objektově orientovaného programování -- třídy (ačkoliv ty jsou podle nejnovější specifikace ECMAScript součástí samotného JavaScriptu), rozhraní, moduly a~podobně.

Jelikož se jedná o~nástavbu, lze používat i čistý JavaScript bez použítí typů, což nám umožní použít i knihovny, které jsou implementovány v~čistém JavaScriptu. Otypování kódu však zvyšuje jeho přehlednost, snižuje chybovost, otevírá nové možnosti pro vývojová prostředí (našeptávání, refaktorizace kódu) a~tím zkvalitňuje vývoj. Proto budeme vyvíjet striktně typovaný kód. 


\subsubsection{Ostatní}
\begin{itemize}
	\item Next.js -- startovní balík pro urychlení vývoje, obsahuje skripty pro spouštění, ladění a~jednoduchý deployment aplikace, importuje také všechny užitečné knihovny (routování, serverová volání, dynamické importování)
	\item Bootstrap -- sada přednastavených šablon, usnadní nám design uživatelského rozhraní
	\item Chart.js -- knihovna pro práci s~grafy
\end{itemize} 






%-----
\section{Shrnutí a~další postup}
V~dosavadním textu byly zmíněny základy finanční analýzy podniku -- její definice, praktický i teoretický význam, byla popsána také vstupní data analýzy. Dále byly zmíněny a~popsány pojmy horizontální a~vertikální analýza a~výběr těch nejzákladnějších poměrových ukazatelů spolu se vzorcem výpočtu a~popisem jejich významu. 

Ještě před návrhem vlastního programového řešení byl proveden průzkum současných možností v~této oblasti. Na jeho základě byl vypracován vlastní návrh, zohledňující přednosti i nedostatky vybraných nástrojů. Hlavním rozdílem je architektura aplikace (klient-server) a~prostředí běhu (webový prohlížeč). Tento výběr následuje trend moderních aplikací a činí nástroj dostupnější. Dalším významným rozdílem je výběr technologií, které učiní kód strukturovaným, lehce rozšiřielným, dlouhodobě udržovatelným a~vysoce znovupoužitelným. 

Při dalším postupu bude ze všeho nejdříve připraveno vývojové prostředí (devstack). To obnáší instalaci, zprovoznění a~nastavení IDE, PHP serveru, databáze, instalace správce balíčků a~balíčků samotných, vytvoření repozitáře, obstarání testovacích sad. Následně může začít implementace klienta, zcela nezávisle na implementaci serveru. Detaily implementace budou uvedeny v~této zprávě.





















































\chapter{Implementace}


\subsection{Načítání a uložení vstupních dat}

\subsubsection{Parsování DPPDP8}
Pro automatizované načítání souborů se syntaxí DPPDP8 pro účely analýzy podniku byl implementován parser. Nejprve je pomocí knihovny fast-xml-parser řetězec s~obsahem XML souboru přetransformován na odpovídající JSON objekt, což umožňuje s~tímto obsahem dále pracovat jako s~JavaScript objektem. Každý rok, respektive každá skupina roků se stejnou strukturou výkazů, je parsován pomocí předdefinovaných map (asociativních polí). Pomocí těchto map se s~výkazy i dále pracuje. Mapa obsahuje následující položky (pro každou tabulku zvlášť):

\begin{itemize}
\item pořadí řádků ve výkazu (reprezentováno polem)
\item označení a plný název položky s~daným číslem řádku (reprezentováno asociativním polem)
\item strom zanoření (asociativní pole)
\item mapa common items (asociativní pole)
\end{itemize} 

Označení a plné názvy všech položek jsou uloženy v~objektu, jehož klíče tvoří čísla řádků těchto položek, což umožňuje rychlý přístup -- pokud máme k~dispozici číslo řádku, s~nímž chceme pracovat, data spjatá s~tímto řádkem lze získat přímým přístupem do objektu přes daný klíč. Pokud by byly řádky a s~nimi spojená data uloženy v~poli, pokaždé bychom museli iterovat celým polem, dokud bychom nenarazili na data odpovídající vybranému řádku.

Při práci s~hodnotami, například jejich výpisu do tabulky, je však žádoucí dodržet pořadí stanovené na stránkách daňového protálu? cit?, které bohužel není obecně konzistentní. Například u~tabulky pasiv je běžné, že se mezi prvními položkami s~čísly řádků tvořícími posloupnost přirozených čísel najednou objeví položka s~číslem řádku o~několik desítek vyšším. To je evidentně způsobeno dodatečným přidáváním nových položek. Ty jsou umisťovány k~souvisejícím položkám (nikoliv na konec), nicméně čísla řádků následujících položek zůstávají a tak je nová položka označena úplně novým, nejvyšším číslem řádku. Jinými slovy, pořadí položky v~tabulce obecně neodpovídá atributu číslo řádku této položky. 

Mapa s~označením a plnými názvy položek sice obsahuje všechna čísla řádků, jelikož jsou to ale klíče objektu, pro jejich získání by se muselo použít konstrukce \texttt{for .. in}, která bohužel v~prohlížeči Chrome nezachovává pořadí, v~jakém jsou klíče zadány. Standard ECMAScript pořadí klíčů při jejich výčtu nijak nespecifikuje \cite{proporder}, to je tak ponecháno na vývojářích. Abychom byli schopni vypsat řádky nejen všechny, ale i ve správném pořadí, obsahuje mapa také pole čísel představující toto pořadí. Na rozdíl od objektu, pole pořadí svých položek zachovává.

Nástroj je schopen podle parametrů zadaných v~mapě načíst jednotlivé položky výkazů a uložit je do vnitřní reprezentace. *do dalsi sekce* Tato reprezentace je používána i při ručním zadávání dat, kdy je vytvořen nevyplněný výkaz, respektive výkaz s~nulovými hodnotami pro pozdější vyplnění. 

* detailni rozpis pri zadavani/editaci vykazu a pro horizontalni analyzu, pro zbytek vybrane polozky
* spolecne polozky napric roky jsou maximalni pocet s~postupnym rozpadem na co nejmenší položky (pro co nejdetailnejsi analyzu) pri soucasnem zachovani vzajemne disjunktnosti nekterych vybranych ?pro jiste zakonitosti napr vertikalni analyza?
* prepocet nadrazenych polozek - musime znat strom - ten taky neni mozne automatizovane vytvorit
* vyber polozek - reknu co chci (trzby) a fce pozna, ktere polozky vytahnout podle roku
* tabulky aktiv/pasiv/vzz nelze stahnout ze zadneho endpointu (kontrolovano i v~dotazech prohlizece) - muselo by se parsovat HTML cele stranky - nakonec vytvoren jednoduchy parser
* funkce pro parsovani HTML nedostupnych dat (cradku,oznaceni,nazev)
* polozky tvori jakysi strom/graf? ale podle jejich oznaceni nelze odvodit vsechny potrebne souvislosti (jake jsou vsechny podpolozky dane polozky, kladne/zaporne), ?strom? je zapsan vyctem primo v~kodu - mapa
* kazdy rok nova legislativa, nejlepe zapsat do kodu bez vetsiho zobecneni

\subsubsection{Ruční zadávání dat}
Pro případ, že uživatel nemá možnost dodat? výkazová data ve formátu XML, 

* co programatora zaskoci je redundance dat v~odevzdavanem XML - jsou ulozeny jak polozky souctu, tak i jeho vysledky - to je pri nacitani ignorovano, pri rucnim zadavani prepocet
* prepocet -> strom / hierarchie / zanoreni





\section{Implementace finanční analýzy}
Po implementaci načítaní a uložení dat potřebných pro analýzu bylo možné začít s~implementací modulu pro provádění samotné analýzy. Ten podporuje druhy analýz zmíněné v~teoretické části. Jmenovitě jsou to analýza finančních toků (cashflow), horizontální analýza, vertikální analýza, analýza poměrových ukazatelů a zobrazení Du Pont rozkladu. Při těchto analýzách jsou zdrojová data čerpána z~finančních výkazů. 

Další implementovanou funkcionalitou je výpočet vnitřního výnosového procenta investice, jehož zdrojová data s~finančními výkazy nesouvisí a jsou tedy zadávána zvlášť, ručně.

Díky mapování rozdílných struktur finančních výkazů na strukturu společnou pro všechny podporované roky je možné sledovat vývoj výsledků analýz v~průběhu času pro všechny vybrané veličiny.

Analýzy, jejichž výsledky jsou tabulární data, fungují na podobném principu. Každá z~nich má svůj vlastní popis -- objekt, ve kterém jsou uloženy všechny potřebné informace: seskupování a hirerarchie výsledků, pořadí výsledků, způsob jejich výpočtu, označení a jednotka. Pro práci s~objektem je implementována funkce vykonávající analýzu nad konkrétními daty. Funkce odpovídající objekt systematicky prochází a čerpá z~něj informace pro výpočet, do kterého dosazuje data získané ze svého jediného parametru -- finančních výkazů. Výsledek uloží do struktury opět podle informací z~objektu.

Popisovaný objekt je uložen jako tzv. Plain JavaScript Object, což si lze představit jako jednoduché asociativní pole klíč-hodnota. Tento způsob implementace byl použit na více místech, jelikož přináší ?flexibilní, parametrizace, kompaktní zápis při rozsáhlém větvení?.

* všechny analyzy: mapa + funkce + zdrojova data (vykazy) - jednoduche zmeny/rozsireni, prehlednejsi
* implementace porovnani - prozatim jen horiz a pomer uk, implementace je vsak v~tomto smeru snadno rozsiritelna (id v~objektu)

\subsection{Společené položky napříč různými strukturami výkazů}
Jedním z~největších problému týkajících se finanční analýzy, se kterým jsem se při implementaci setkal, je měnící se struktura finančních výkazů v~čase. Abychom mohli cokoliv analyzovat a porovnávat výsledky analýzy za různá časová období, je nutné nejprve v~každém z~těchto období získat odpovídající, srovnatelná data. Do roku 2015 včetně, byly změny struktur minimální, zejména se jednalo o~rozpad nějaké ze stávajících položek na více podpoložek. V~roce 2016 však došlo k~významným změnám?, k~přesunům celých položek a především jejich částí pod jiné položky. Některé položky zůstaly nezměněny, u~některých došlo ke změnám, které lze pomocí výpočtu eliminovat a získat tak srovnatelná data pro všechna období, u~ostatních položek změna znemožňuje jejich použití. 

* Výčet změn je v~převodovém můstku/prevodove tabulce? 
* v~budoucnu muzou byt ve specifikacich zase zmeny - struktury a funkce s~nimi pracujici implementovat tak, aby se daly snadno rozsirit

Tam, kde je v~převodovém můstku u~odpovídající položky z~minulých let napsáno kurzívou \uv{\textit{(část položky)}}, máme bohužel smůlu. Změna je totiž na úrovni učetnictví a z~dodaných výkazů není možné vypočítat, o~jak velkou část položky se jedná. Tyto položky tedy musely být úplně vynechány.

Tyto společné položky se používají pro všechny druhy analýzy, původní výčet položek v~jednotlivých letech je využit zejména při ukládání, zobrazování a editaci účetních výkazů.


\subsection{Horizontální analýza}
* analyzovany jsou A, P i VZZ
Horizontální analýza je na nejvyšší úrovni prováděna dvěma způsoby. Ve zdrojovém kódu je uložena informace o~tom, které roky? mají stejnou strukturu finančních výkazů. Díky tomu lze uložené výkazy seskupit a provést horizontální analýzu na detailní úrovni -- pro výkazy se stejnou strukturou je analyzována každá z~položek těchto výkazů; potřebné informace, jako jsou názvy, označení a pořadí položek jsou uloženy přímo v~mapě struktury těchto výkazů.

Tímto způsobem však nejsme schopni analyzovat delší časové období, vzhledem k~podporovaným letem? v~implementovaném nástroji jsou to maximálně 2 roky. Abychom mohli analyzovat ?? v~delším časovém horizontu, využijeme mapy společných položek napříč různými strukturami výkazů. Pro účely horizontální analýzy je nutné definovat v~rámci každého z~výkazů? (a/p/vzz) pořadí těchto společných položek. Při výpočtu konkrétních hodnot položek tak stačí nad uloženým pořadím iterovat a přes odpovídající funkci zjistit název položky a její hodnotu pro daný rok.

Kromě konkrétních hodnot položek v~daných letech jsou vypočítány i meziroční rozdíly hodnot -- absolutní a relativní (procentuální). Ze vzorce pro výpočet relativního rozdílu vyplývá nutnost explicitně ošetřit prípad, kdy je hodnota položky v~předchozím roce nulová.

$$d_{ABS}=h_{n}-h_{n-1}$$
$$d_{REL}=(h_{n}-h_{n-1})/h_{n-1}$$


Podobně jako u~ostatních druhů analýz, výsledek není uložen v~běžném (indexovaném) poli, nýbrž v~poli asociativním. Nevýhodou je sice nutnost explicitní iterace nad jednotlivými výsledky analýzy, tento způsob uložení je však velmi příznivý při znovupoužití vypočítaných výsledků -- například při výpočtu rozdílu hodnot jedné položky v~různých letech nebo srovnání podniků v~rámci horizontální analýzy. Nejprve se vypočítají výsledky pro všechny srovnávané podniky, poté je nutné podnikové výsledky nahrát do jedné společné struktury. Pokud by byly výsledky pro podnik uloženy v~běžném poli, museli bychom pro každou z~položek respektive pro každý z~analyzovaných roků procházet všechny položky respektive roky a hledat mezi nimi ten, který se právě chystáme zpracovat. Díky asociativnímu poli můžeme na hledanou hodnotu přistoupit přímo, přes klíč položky a následně klíč roku, neprobíhá tedy žádné vyhledávání. Přesněji neprobíhá vyhledávání na úrovni naší implementace, ale na úrovni interpretu JavaScriptu.

* jedno z~implementovanych mezipodnikovych srovnani, 
* demonstrace ulozeni vykazu na nejdetailnejsi uroven


\subsection{Vertikální analýza}
* A, P i VZZ
Při vertikální analýze se nezohledňuje různá struktura výkazů z~různých let, používají se pouze společné položky. Jedna položka vertikální analýzy obsahuje vždy vztažnou veličinu a pole částí, z~nichž je složena a jejichž procentuální zastoupení chceme vyjádřit. Tyto položky jsou obsaženy pro každý z~výkazů - pro aktiva, pasiva a výkaz zisku a ztrát. Při výpočtu algoritmus iteruje nad výkazy, v~rámci výkazů dále iteruje nad položkami. U~každé položky nejprve spočte hodnotu vztažné veličiny, poté hodnotu všech jejích částí, ze které lze vypočítat její podíl na celku.

Jako části byly položky, které jsou vzájemně disjunktní, jinak by se mohlo stát, že suma procentuálního zastoupení všech částí by přesáhla 100\%. Kvůli různým strukturám výkazů a problému nastíněném v~sekci ? je však situace spíš opačná -- některé celky nelze úplně rozložit?.

\subsection{Poměrové ukazatele}
Tak jako u~ostatních analýz, i výpočet poměrových ukazatelů je realizován pomocí funkce, která se řídí mapou pro provádění výpočtů? a podle této mapy získává hodnoty z~dodaných výkazů. Mapa na nejvyšší úrovni obsahuje skupiny, či spíše druhy poměrových ukazatelů (rentabilita, likvidita atd.). V~rámci každé skupiny je uloženo pole prvků výčtového typu. Tyto prvky představují konkrétní ukazatele, přesněji jsou to klíče, přes něž lze k~datům spojeným s~daným ukazatelem přistupovat -- momentálně jsou to název a způsob výpočtu ukazatele, klíč je využíván i ke zjištění průměrné hodnoty ukazatele v~odvětví.


\subsubsection{Ohodnocení poměrových? ukazatelů}
Pro některé? ukazatele, například ukazatele likvidity, lze najít doporučené hodnoty ve většině zdrojů?. Bohužel jsou tyto hodnoty různé v~závislosti na vybraném zdroji. V~praxi toto platí dvojnásob -- hodnoty ukazatelů mohou nabývat? extrémních odchylek, přičemž to nemusí nutně signalizovat? špatnou situaci podniku. ?Jako příklad si můžeme uvést společnost Alza.cz a.s. Ta disponuje ..., který je však kryt? vlastními zdroji z~pouhých X? procent.? 

Nejlépe odpovíjdajícími? referenčními hodnotami jsou výsledky finanční analýzy podnikové sféry prováděné Ministerstvem průmyslu a obchodu. 

* nelze rict obecne rict, od jakych hodnot dobre/spatne...? , zejmena u~rentability cim vyssi tim lepsi, ale v~zadnem pripade z~teto hodnoty nelze bez lidskeho faktoru vyvozovat zavery a tedy výslednou hodnotu jednoznačně ohodnotit; naopak, vyvozování závěrů necháme na uživateli, přičemž k~podpoře této činnosti se pokusíme dodat co nejvíce relvantních informací. lze se odrazit od prumeru pro dany obor - dobra vypovidajici hodnota. dale take mezipodnikove srovnani
* zpusob vypoctu jednotlivych ukazatelu se mezi ruznymi zdroji lisi, kvuli implementaci ohodnoceni / srovnani s~prumernymi hodnotami z~MPO bylo pouzito jejich zpusobu
* MPO - pro nektere ukazatele (vetsinu z~vybranych v~tomto reseni) primo hodnoty, pro jine data pro jejich vypocet, pro ostatni ani to ne


\subsection{Du Pont rozklad}
Pro implementaci byl vybrán pyramidový rozklad rentability vlastního kapitálu. Většina prvků rozkladu jsou hodnoty již zmíněných ukazatelů (ukazatele představují uzly diagramu) či položek finančních výkazů (položky představují listy diagramu). Přesto byl pro tuto analýzu vytvořen separátní modul. V~něm jsou doplněny především metody pro výpočet ukazatelů, které nebyly implementovány v~rámci analýzy poměrových ukazatelů. Modul funguje také jako mezivrstva -- pokud bychom chtěli výslednou hodnotu ukazatele upravit speciálně pro účely Du Pont analýzy, můžeme to udělat zde. 

Jelikož jsou při grafické interpretaci pyramidového rozkladu zobrazeny také matematické rovnice pro výpočet jednotlivých uzlů, v~modulu jsou uloženy i tyto rovnice. Řešením by mohlo být uložení rovnice do abstraktního syntaktického stromu, čímž by se získával popis výpočtu i výpočet samotný z~jednoho místa?.

* svg

\subsection{Analýza cashflow}
Jelikož tato implementace dále s~výsledky cashflow analýzy nepracuje, jsou pro usnadnění práce při jejich vykreslování uloženy v~běžném poli. Mnoho vzorců z~oblasti poměrových ukazatelů lze však změnit dosazením výsledků analýzy cashflow namísto stávajících členů, čímž získáme zase další užitečnou vypovídající hodnotu. Po přepracování struktury výsledků cashflow analýzy, zejména jednoznačným označením jednotlivých položek, lze nástroj rozšířit o~další typy ukazatelů. 

\subsection{Vnitřní výnosové procento}
\label{irr}
Vstupem pro všechny doposud zmíněné analýzy jsou roční výkazy podniku -- rozvaha a výkaz zisku a ztrát. Pro výpočet vnitřního výnosového procenta určité investice či projektu se však používají spíše peněžní toky výhradně s~ním spojené. Prvním pěněžním tokem obvykle bývá počáteční investice, která je intuitivně evidována zvlášť. Zbývající pěněžní toky 

Výpočet NPV je přímočarý, spočívá v~pouhém dosazení do vzorce. Analytické řešení výpočtu VVP však není známé?, budeme jej řešit numericky. 
* krome irr i npv - uzce spolu souviseji, pri vypoctu irr je pouzito vzorce npv
* npv i irr - pocitat pro vsechny roky, nejen pro posledni - taky do rozsireni

\section{Architektura aplikace}

* neni vyuzito mysql
* pouze klient, vypocty jsou ale relativne nenarocne (mozna irr - iteracni vyp)
* firebase pro nase ucely staci (prestoze mysql by bylo lepsi - moznosti rozsireni), implementace serveru by ?moc prace?, pricemz neni hlavnim cilem prace


* autentizace na firebase
* kazda analyza - pri vykresleni prislusne obrazovky se nastroj pokusi o~analyzu, v~pripade neuspechu ulozi error, ktery pak prislusna komponenta vykresli

routovani:
* casti url adresy odpovidaji architektonickym vrstvam
* client side routing - url zpracovava aplikace (knihovna), nevyhody vyhody najit na netu, prohlizec nenajde jednotlive komponenty - jen hlavni
* react - ale to je spise prezentacni vrstva - vic v~sekci uzivatelske rozhrani

* ES6
* vykon - aplikace je client - server, kvuli pouzitym technologiim server pouze storage, vse se pocita u~klienta ale beh aplikace je plynuly alespon na V8, ktery ma efektivni prekladac nebo tak neco, efektivnejsi sprava dat (udrzovani vysledku analyz) ci implementace serveru, pokud by nemela vykon stacit.

\subsubsection{React}
* od fb
* prezentacni vrstva, ne uplne mVc
* deklarativni zpusob zapisu

\subsubsection{Redux}
Pro správu dat na aplikační vrstvě je využito knihovny Redux, jelikož samotný React je spíše ??prezentacni, mVc?? a pro účely správy stavu komplexnější aplikace začíná být nedostačující /spis spaghetti?. Redux je tedy kontejner pro globální stav aplikace??. Může sloužit jako cache, tedy pro uložení dat obdržených od serveru (databáze) ale i dat lokálně vytvořených, například uživatelských vstupů. lokálního charakteru?. 


Vzhledem ke stromové hierarchii React komponent? je tok dat v~běžné reactí? aplikaci jednosměrný, data jsou předávána z~rodičovského uzlu na své potomky. To s~sebou nese jisté nevýhody. Komponenty aplikace jsou sice logicky členěné, pokud však mají dvě komponenty přistupovat na stejná data a tato data také zapisovat,  

* 3 principles of redux
* diagram + popis (store, view, user action, dispatch)

\begin{figure}
  \centering
  \includegraphics[width=14cm]{img/redux.pdf}
  \caption{Změna stavu aplikace -- rozdíl bez a s~využitím knihovny Redux \cite{redux}}
\end{figure}



\section{Uživatelské rozhraní}

Prostředím běhu aplikace je webový prohlížeč, aplikace byla vyvíjena primárně pro Google Chrome. Vzhled aplikace definují jazyky HTML a CSS, kód je však psán v~jazyce JSX. Ten je syntaktickým rozšířením jazyka JavaScript umožňujícím v~kódu pracovat s~šablonou jako s~proměnnou Javascriptu, přičemž má šablona podobu kódu HTML ve kterém jsou JavaScriptové konstrukce pro iteraci, selekci a interpretované kusy JavaScriptového kódu?.

Jelikož s~použitím samotného HTML?, bylo vhodné sáhnout po knihovně hotových, nastylovaných prvků. Material UI? . S~touto knihovnou je možné tvořit aplikace s~, které ? po designové stránce.

Velkou část aplikace tvoří

* Jelikož samotné HTML ?velmi nehezke prostredi, mozna z~historickych duvodu? a vytvoření i základního designu webové aplikace ?muze byt velky ukol?. 
* material design google - sada ikon
* prevazne tabularni data
* obrazovky
* uzivatel se prihlasuje, pod uzivatelem jsou evidovana data - podniky/vykazy + investice
* svg - spise vztahy nez presne souradnice - snadnejsi zmeny, skalovatelnost
* topbar
* vzber poloykz u~tabularnich dat

\subsection{Obrazovky}

Po spuštění aplikace se uživatel musí přihlásit, zobrazeno je pouze modální dialogové okno pro vyplnění přihlašovacích údajů nebo registraci. Při úspěšném přihlášení je přesměrován na hlavní obrazovku a je mu zpřístupněna fixní horní lišta aplikace, v~níž lze přepínat mezi obrazovkami. V~liště je také tlačítko pro odhlášení. Na domovské stránce se lze pomocí horní lišty přepínat mezi dvěma obrazovkami -- seznamem podnků a seznamem investic.

Po výběru investice ze seznamu je uživatel přesměrován do detailu investice, kde je možné nastavit její parametry -- počáteční rok, velikost počáteční investice a při výpočtu čisté současné hodnoty i hodnotu úrokové sazby. Nezbytnými parametry jsou také peněžní toky v~jednotlivých časových obdobích, uživateli je tak umožněno přidávat další roky trvání investice, v~rámci nichž zadává libovolně pojmenované výnosy a výdaje. Pokud jsou zadány nevyhovující parametry, je uživatel upozorněn. Pokud jsou k~dispozici výsledky, může přepínat mezi zobrazením hodnoty čisté současné hodnoty a vnitřního výnosového procenta.

Na obrazovce se seznamem podniků jsou vykresleny karty s~jednotlivými podniky a tlačítko pro možnost přidání nového podniku. V~rámci konkrétního podniku lze pokračovat na seznam jeho evidovaných výkazů, jednu z~obrazovek s~analýzou nebo na obrazovku srovnání *buďto přes kartu nebo horni listu*. 

Na obrazovce se seznamem výkazů se lze přepínat mezi výkazy z~různých let, případně výkaz smazat nebo přidat nový, což je nezbytný krok i při importu dat. Na kartě s~výkazem lze ručně vyplnit údaje nebo použít tlačítko pro import.


\section{Vývoj}
Pro ověření správnosti navrženého řešení byl v~každé z~oblastí finanční analýzy nejprve implementován prototyp se zúženým výběrem položek a omezenou funkcionalitou. Úplné doplnění funkcionality a položek proběhlo až v~dalších fazích implementace, stejnětak jako opakovaná refaktorizace. Tento postup byl zvolen i při implementaci persistence dat. Ve zdrojovém kódu je možnost volby mezi nahráváním dat z~databáze a jejich podvržením pomocí definice jednotného rozhraní dat. Pokud zrovna neimplementujeme modul zajišťující persistenci dat, využití podvržených dat je velmi výhodné z~důvodu urychlení vývojářského cyklu a možnosti vyvíjet bez připojení k~internetu.

Jako vývojové prostředí bylo použito IDE WebStorm od společnosti JetBrains, jehož licence je poskytována studentům zdarma. Kromě mnoha dalších, nástroj má podporu pro všechny technologie využité při implementaci a jejím usnadnění, především jazyky JavaScript, TypeScript a JSX.

* v~tomto IDE je také zabudován git modul pro správu verzí. Celý projekt byl průběžně verzován.

Po stažení složky s projektem z repozitáře je pro vývoj nezbytná instalace závislostí.
Po spuštění skriptu je rozhraní aplikace otvevřeno v prohlížeči.

$$\texttt{npm run install \&\& npm run start}$$

Tento příkaz zůstává spuštěn?XXX?, na pozadí běží kontrola na změny souborů se zdrojovými kódy, TypeScript watcher. Při změně je TypeScript kód automaticky překompilov8n na JavaScript kód, poté je kód dále transformován, například pro funkčnost v co nejvíce prohlížečích či jejich verzích. Po doběhnutí dojde ke znovunačtení aplikace v prohlížeči -- aktualizace stránky. Díky knihovně React Router, která pro navigaci využívá URL adresu, se při aktualizaci stránky stav navigace uchová a aplikace se spustí na původní obrazovce.

Zkompilování kódu do balíčku pro nasazení je prováděno příkazem \texttt{npm run build}. Po správné konfiguraci nástroje firebase je možné aplikaci jednoduše nasadit do provozu na veřejné adrese pomocí příkazu \texttt{firebase deploy}.



* ctrl s~- watcher - testy i implementace - urychleni vyvoje - nekompilovany
* vsechny knihovny pres npm, jejich seznam v~package.json


\section{Možnosti rozšíření nástroje}

Vzhledem k~tomu, že se způsoby výpočtu některých ukazatelů v~různých literaturách liší, bylo by vhodné uživateli zobrazit způsob výpočtu, který je použit v~tomto nástroji. Při současné implementaci se jeví jako nejjednodušší řešení ke každé metodě provádějící výpočet přiřadit také popis výpočtu, například ve formě řetězce. Popis výpočtu a výpočet samotný by však nevycházely ze stejného zdroje a nebyly tak sémanticky propojeny, vývojář by musel při každé změně algoritmu pro výpočet adekvátně měnit popis. Vzhledem k~tomu, že se jedná o~víceméně jednoduché matematické rovnice, nabízí se mnohem lepší řešení -- uložit rovnice pro výpočet do odpovídajícího abstraktního syntaktického stromu (AST). Tato struktura by umožnila obojí -- vypočítat výsledek i vygenerovat popis výpočtu a jeho složek na základě jednotného zdroje. Tento způsob by také otevřel další možnosti rozšíření, pomocí vhodného rozhraní by uživatel mohl editovat vzorce existujících ukazatelů podle svých potřeb či vytvářet úplně nové.

Nástroj pro jednoduchost podporuje pouze meziroční analýzu. Lze však vyvodit, že se v~praxi může provádět analýza obecně různých časových obodbí. K~částečnému zkvalitnění tohoto rozšíření by se dalo použít i dat z~analýzy podnikové sféry prováděné MPO, která uvádí statistiky kvartálně (momentálně jsou využity pouze roční statistiky).

Ve statistikách MPO jsou uvedeny také oborové sumy za většinu hlavních položek finančních výkazů. Porovnáním adekvátních položek (částí k~celku) by bylo teoreticky možné zjistit průměrné oborové hodnoty v~rámci vertikální analýzy a tyto v~nástroji uvést. Dále je ve statistikách uveden také počet podniků v~odvětví, vydělením sumy položky počtem podniků by tak šlo získat průměrnou hodnotu položky pro dané odvětví -- průměrné hodnoty pro horizontální analýzu. V~souvislosti s~daty MPO by se také nástroj dal rozšířit o~práci se zbývajícími poměrovými ukazateli, pro které jsou uváděny průměrné hodnoty v~odvětví, nebo alespoň hodnoty potřebné k~jejich výpočtu.

Jelikož jsou tyto statistiky uloženy jako velmi rozsáhlá tabulární data programu Excel, ruční výpočet a zapisování do zdrojového kódu je velmi zdlouhavé. To může být vyřešeno automatizovaným zpracováním těchto souborů či umožněním uživateli vyplnit hodnoty v~případě jeho zájmu.

Z~oblasti finanční analýzy se dále nabízí rozšíření importu o~zkrácené výkazy, účelové členění nebo možnost čerpat zdrojová data přímo z~účetnictví (nikoliv z~účetní závěrky), pokud existuje nějaký standardizovaný formát exportu těchto dat. To by umožnilo ještě detailnější analýzu. Nebo naopak, umožnit uživateli vyplnit pouze data nezbytná k~výpočtu ukazatelů a nenutit jej tak nahrávat celé výkazy, které ani nemusí mít k~dispozici. Kromě zobrazování referenčních hodnot by nástroj také mohl hlásit evidentní rizikové faktory, jako příklad můžeme uvést hospodaření se ztrátou. Díky způsobu implementace a struktury výsledků jednotlivých analýz je nástroj připraven pro širší záběr v~rámci mezipodnikového srovnání rozšířením modulu na práci se všemi druhy podporovaných analýz.



* vice roku - nemoznost zobrazit vse - vymyslet, jak by se to dalo zobrazovat
* relační databáze (mysql) namísto objektové - větší kontrola při změnách aplikace
* výkon - ulozeni vysledku analyzy a jejich sprava, aby se nemuselo pocitat pri kazdem spusteni aplikace
* lepsi cache dat - pokazde se vse znovunacita pro jednoduchost
* jine ukazatele, rozsireni analyzy podniku i analyzy v~oblasti investic
* scrolovani tabulek scrolluje celou stranku - vylepsit layout

* pro usnadneni ovladani: offline?, cashflow - preddefinovane polozky, razeni / vyhledavani v~tabulkach, uzivatelske preference
* samozrejmost - dukladnejsi osetreni uzivatelskych vstupu
* v~dalsim roce se muze opet menit legislativa - aktualizace kodu

\begin{comment}
\chapter{Testování}
\section{??? nejake bezne testovani}
\section{Demonstrace na zvoleném vzorku dat}
\end{comment}

\section{Demonstrace na vybraném vzorku dat}
Firma, na které aplikuji ve své diplomové práci finanční analýzu, je firma Krajči plus s. r. o. Jedná se o~ryze českou společnost, která byla založena již v~roce 1995. Společnost začínala
jako malý regionální výrobce, který dodával své výrobky do blízkého okolí. Postupem času se této společnosti podařilo stát soběstačnou a prosperující firmou ve své oblasti. Do konce roku 2013 podnikala firma jako fyzická osoba, nevedla tedy účetnictví. V~roce 2014 se majitelé rozhodli, že firma změní právní formu na společnost s~ručením omezeným. Od tohoto roku jsem zpracoval pro firmu Krajči plus s.r.o. finanční analýzu a jsem přesvědčen, že i do budoucna bude tato firma mé metody finanční analýzy v~závislosti na svých účetních výkazech plně využívat.

Firma podniká v~potravinářském oboru, zabývá se jednak výrobou bramborových lupínků a krekerů a jednak nákupem a prodejem zboží – tyčinek a suchých plodů. Ve firmě probíhá celý výrobní proces, počínaje nákupem surovin až po distribuci obchodním partnerům – společnost distribuuje své výrobky po celé České a Slovenské republice. Vedení společnosti se zavazuje k~neustálému zlepšování efektivnosti řízení i zvyšování kvality produktů. Tímto zlepšováním jsou míněny jak technologické inovace, které vyžadují nové a nové investice, tak přehodnocování a zkvalitňování jednotlivých procesů ve vedení, výrobě a ve vztazích s~odběrateli a dodavateli.

Výsledky finanční analýzy jsou srovnávány s~doporučenými hodnotami v~daném odvětví podle klasifikace ekonomických činností (CZ – NACE), které jsou závazné jak pro orgány vykonávající státní statistickou službu, tak pro zpravodajské jednotky, které poskytují údaje pro statistická zjišťování prováděná státní statistickou službou patří firma do sekce zpracovatelského průmyslu, konkrétně do části „Výroba potravinářských výrobků“. Analyzovaná společnost Krajči plus s. r. o. dosáhla ve sledovaném období 2014 – 2017 nadprůměrných výsledků. Provozní výsledek hospodaření, který je pro firmu výrobního typu tou nejvýznamnější složkou, se za celé sledované období více než zpětinásobil. Finanční výsledek hospodaření, který je ovlivněn nákladovými úroky a ostatními finančními náklady je po celou dobu sledovanosti mínusový, ale v~žádném případě neměl zásadní vliv na celkový hospodářský výsledek ani v~jednom ze sledovaných roků. Hospodářský výsledek, který je hlavním stavebním kamenem v~celé řadě ekonomických ukazatelů, je podmíněn růstem tržeb. Dokladem expanze na potravinářský trh je viditelný růst prodeje zboží z~původních 5 496 mil Kč v~roce 2014 na 13 168 mil. Kč v~roce 2017 a růst prodeje vlastních výrobků z~původních 28 770 mil. Kč v~roce 2014 na 99 931 mil. Kč v~roce 2017.
Ukazatelé rentability ve sledovaném období nás ujišťují o~tom, že ve firmě Krajči plus s.r.o. jsou velmi efektivně zhodnocovány prostředky, které firma do podnikání vložila, bez ohledu na to, jestli se jedná o~vlastní nebo cizí zdroje. Rentabilita vlastního kapitálu, která nás samozřejmě zajímá nejvíc je ovlivňována právě kumulací zisku, který je výsledkem hospodaření minulých let. Čím vyšších hodnot rentability je dosahováno, tím je podnik považován za úspěšnější. Vidíme, že hodnoty ukazatelů se ve všech případech pohybují nad odvětvovým průměrem. Pokud se podíváme na rentabilitu tržeb, vidíme že z~jedné koruny tržeb firma dosahuje na počátku podnikání 0,1498 zisku . V~roce 2017 je to již hodnota 0,2452 , což svědčí o~výborných výsledcích.

Co se týče ukazatelů likvidity a zadluženosti, které jsou ostře sledované konkurencí a bankovními institucemi, které jsou věřiteli firmy, lze říci, že zejména likvidita prvního stupně – tzv. okamžitá likvidita se za sledovaná léta zvýšila více než trojnásobně ( z~0,66 na 2,07), přičemž minimální doporučená hodnota pro potravinářskou výrobu je 0,16. Likvidita druhého a třetího stupně, která je při ukončení činnosti firmy daleko hůře proveditelná, se v~tomto případě pohybuje také v~červených číslech a nad doporučenými hodnotami. Ukazatelé zadluženosti nám přinášejí informace o~úvěrovém zatížení a o~jiných závazcích společnosti. V~našem případě je zřejmé, že celkový vlastní kapitál převyšuje hodnotu cizích zdrojů. Vyjímkou je samozřejmě rok 2014, který se datuje jako počátek podnikání nové právní formy společnosti a v~tomto roce se poprvé vytváří čistý zisk, který ovlivní výši vlastního kapitálu až v~roce 2015. Z~výše uvedeného vidíme, že kromě startovacího roku 2014, jsou poměry cizího a vlastního kapitálu naprosto v~pořádku. 
Pokud bych shrnul výsledky finanční analýzy sledované firmy v~období od 2014 – 2017, hodnoty všech
ukazatelů se pohybují bezpečně nad hranicemi doporučených hodnot. Tím se společnost jednoznačně řadí mezi finančně zdravé podniky.
%%************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
\chapter{Závěr}
V~rámci této diplomové práce se podařilo implementovat nástroj umožňující provádět fundamentální úkony? v~oblasti finanční analýzy.

Uživateli se snaží práci co nejvíce usnadnit - uložiště, přístup, přičemž se snaží k~vytvoření závěrů o~situaci podniku poskytnout užitečné? informace, především průměrné hodnoty v~odvětví se stejným zaměřením (NACE) a možnost srovnání s~jiným, vybraným podnikem.

Nástroj je implementován jako webová aplikace - není nutné instalovat,javascript , uživatelé, data uložena vzdáleně - přístup odkudkoliv

* reseni je originalni jak po technicke tak po funkcni strance?. 

* zpusob implementace je ..lehce rozsiritelne.., coz se kvuli menicim se vykazum ?hodi?







\begin{comment}

766F6A74617065747231393439

**
Jedna se
o~ačkoliv
položka
mapa
různ odliš (z~ruznych zrdoju ruzne hodnoty)
router
JavaScript
TypeScript
**

* muzu dat vykazy do prilohy? je to vubec potreba? je to napsane v~uvodu, ze to tam bude

aktiva: 
	17+16;
	15+14 +13[nazvy]+12+11+10[nazvy]

pasiva:
	17+16;
	15+14 +13[nazvy,radek_58_chybi]+12[radek_57_chybi]+11[radek_56_chybi]+10[nazvy]

vzz:
	17+16;
	15+14 +13[nazvy]+12+11+10


* cilova skupina - podnikatele - analyza z~vlastni iniciativy, nebo financni analytici, kteri budou chtit evidovat vice podniku

* navrh
	- srovnani softwaru - po diskuzi s~lidmi z~praxe je velmi casto pouzivan pouze excel
	- analyza pozadavku - use case diagram
	- srovnani software - zadny z~nich neumi VV%, na VV% a jeho trochu jine pouziti byla nalezena jina diplomova prace / cit /

\end{comment}

